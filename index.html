<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CoderDojo川西</title>
  <link rel="stylesheet" href="style.css" /> 
  <script defer>
    // スムーススクロール
    document.addEventListener("DOMContentLoaded", () => {
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function(e) {
          e.preventDefault();
          document.querySelector(this.getAttribute("href")).scrollIntoView({
            behavior: "smooth"
          });
        });
      });

      // 開催イベント切り替え
      // 開催イベントをDateオブジェクトで管理し、現在より未来のイベントのみを表示対象とする
      const events = [
        { dateObj: new Date(new Date().getFullYear(), 10, 10), month: "今月", date: "11月10日(日)", place: "川西市立中央図書館 3階" },
        { dateObj: new Date(new Date().getFullYear(), 11, 8), month: "来月", date: "12月8日(日)", place: "川西市立中央図書館 3階" },
        { dateObj: new Date(new Date().getFullYear() + 1, 0, 12), month: "再来月", date: "1月12日(日)", place: "川西市立中央図書館 3階" }
      ];

      let currentIndex = 0;
      const monthEl = document.getElementById("month");
      const dateEl = document.getElementById("event-date");
      const placeEl = document.getElementById("event-place");

      // 今日より後の日付のイベントのみをフィルタリング
      const today = new Date();
      today.setHours(0, 0, 0, 0); // 時刻を無視するため

      const futureEvents = events.filter(ev => ev.dateObj >= today);

      function updateEvent() {
        if (futureEvents.length === 0) {
            monthEl.textContent = "未定";
            dateEl.textContent = "次回の開催は未定です";
            placeEl.textContent = "しばらくお待ちください";
            return;
        }
        
        // futureEventsの配列内でループ
        const ev = futureEvents[currentIndex % futureEvents.length];
        monthEl.textContent = ev.month;
        dateEl.textContent = ev.date;
        placeEl.textContent = ev.place;
      }

      document.getElementById("prev-btn").addEventListener("click", () => {
        if (futureEvents.length > 0) {
            currentIndex = (currentIndex - 1 + futureEvents.length) % futureEvents.length;
            updateEvent();
        }
      });
      document.getElementById("next-btn").addEventListener("click", () => {
        if (futureEvents.length > 0) {
            currentIndex = (currentIndex + 1) % futureEvents.length;
            updateEvent();
        }
      });

      updateEvent();
    });
  </script>
</head>
<body>
  <header>
    <div class="container header-container">
      <h1 class="logo">CoderDojo川西</h1>
      <nav>
        <ul>
          <li><a href="#events">開催予定</a></li>
          <li><a href="#about">CoderDojoとは</a></li>
          <li><a href="#organizer">主催者情報</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <section id="events" class="events-section">
    <h2>次回の開催</h2>
    <div class="event-card">
      <button id="prev-btn" class="nav-btn">◀</button>
      <div class="event-info">
        <h3 id="month"></h3>
        <p id="event-date"></p>
        <p id="event-place"></p>
      </div>
      <button id="next-btn" class="nav-btn">▶</button>
    </div>
  </section>

  <section id="about" class="about-section">
    <h2>CoderDojoとは？</h2>
    <p>
      CoderDojoは、子どもたちのための無料のプログラミングクラブです。<br>
      世界中に広がるコミュニティの一つとして、川西でも楽しく活動しています。<br>
      参加費は無料で、初心者から経験者まで誰でも歓迎です。
    </p>

    <h2>CoderDojo川西の特色</h2>
    <p>
      川西道場では、ScratchやMinecraft、Web制作など、<br>
      子どもたちの「やりたい！」を一緒に形にするサポートをしています。<br>
      メンターと一緒に、自分だけのアイデアを形にしてみましょう。
    </p>
  </section>

  <section id="organizer" class="organizer-section">
    <h2>主催者情報</h2>
    <p>
      主催：CoderDojo川西運営チーム<br>
      代表：○○ ○○<br>
      連絡先：coderdojo.kawanishi@example.com
    </p>
  </section>

  <footer>
    <p>© 2025 CoderDojo Kawanishi</p>
  </footer>
</body>
</html>
